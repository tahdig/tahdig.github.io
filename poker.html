<html>
<body>

<style>
p {color: black}
body {background-color: #047911}
img {width: 50px; height: 73px; margin: 5px}
.card {width: 75px; height: 109.5px; margin: 0}
#topTable {text-align: center}
#randomButton {text-align: center; width: 100px}
.emptyCell {width: 25px}
.emptyImage {width: 75px}
.emptyRow {height: 30px}
</style>

<p>
  Pick a card (e.g. 6H for the 6 of Hearts), dispaly the full deck, or play Texas hold'em by yourself..for hours.
  <br><br>
  <input id="card"></input>
  <button id="button">Display!</button>
  <button id="fullDeck">Full Deck!</button>
  <button id="randomButton">Texas hold'em</button>
</p>
<p id="errorMessage" style="visibility:hidden; color:red">
  Pick a real card
</p>
<table id="topTable">
  <tr>
    <td>Selected:</td>
    <td class="emptyCell"></td>
    <td>Card 1:</td>
    <td>Card 2:</td>
  </tr>
  <tr>
    <td><img id="myCard" class="card"></td>
    <td class="emptyCell"></td>
    <td><img id="h1" class="card"></td>
    <td><img id="h2" class="card"></td>
  </tr>
  <tr>
    <td class="emptyRow"></td>
    <td class="emptyRow"></td>
    <td>Flop:</td>
    <td></td>
    <td></td>
    <td></td>
    <td>Turn:</td>
    <td class="emptyRow"></td>
    <td>River:</td>
  </tr>
  <tr>
    <td class="emptyImage"></td>
    <td class="emptyCell">Boardcards:</td>
    <td><img id="flop1" class="card"></td>
    <td><img id="flop2" class="card"></td>
    <td><img id="flop3" class="card"></td>
    <td class="emptyCell"></td>
    <td><img id="turn" class="card"></td>
    <td class="emptyCell"></td>
    <td><img id="river" class="card"></td>
  </table>
  <br>

  <script>
  document.getElementById('button').onclick = showCard;
  //regular expression:
  var matcher = /^([23456789ajqkAJQK]|10)[sdchSDCH]$/;
  var errorMessage = document.getElementById('errorMessage');
  var myCard = document.getElementById('myCard');

  function showCard() {
    var card = document.getElementById('card').value;
    if (!(matcher.test(card))) {
      errorMessage.style.visibility = 'visible';
      myCard.visibility = 'hidden';
      myCard.src = '';
      return;
    }
    errorMessage.style.visibility = 'hidden';
    myCard.style.visibility = 'visible';
    var loc = cardFileName(card.toUpperCase());
    myCard.src = loc;
  }

  const SUITS = 'CDHS';
  const FACES = 'JQKA';

  function makeDeck() {
    var result = [];
    for (var j=0; j<4; j++) {
      var suit = SUITS[j];
      for (var i=2; i<11; i++){
        result.push(i+suit);
      }
      for (var k=0; k<4; k++) {
        result.push(FACES[k] + suit);
      }
    }
    return result;
  }
  var cards = makeDeck();

  function imageCreate(card) {
    var image = document.createElement('img');
    image.src = cardFileName(card);
    document.body.appendChild(image);
  }

  function clickFullDeck() {
    for (var i = 0; i < cards.length; i++){
      imageCreate(cards[i]);
    }
    document.getElementById('fullDeck').disabled = true;
  }

  document.getElementById('fullDeck').onclick = clickFullDeck;

  // function randomizer() {
  //   var randomSuit = Math.floor(4 * Math.random());
  //   var suit = ['C','D','H','S'][randomSuit];
  //   var randomNumber = Math.floor(13 * Math.random());
  //   var number = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'][randomNumber];
  //   var card = number + suit;
  //   var fileName = 'cards/png/'+card+'.png';
  //   return fileName;
  // }
  //console.log(randomizer())

  function cardFileName(cardName) {
    return 'cards/png/'+cardName+'.png';
  }

  // returns a random item in array cards
  function randomizer() {
    return cards[randomInt(cards.length)];
  }

  // returns a random num [0 , limit)
  function randomInt(limit){
    return Math.floor(limit * Math.random());
  }

  document.getElementById('randomButton').onclick = dealHand;


  var h1 = {id: 'h1', val: ''};
  var h2 = {id: 'h2', val: ''};
  var f1, f2, f3;
  var turn, river;

  function setSource(card) {
    return document.getElementById(card.id).src = cardFileName(card.val);
  }

  function dealHand() {
    h1.val = randomizer();
    h2.val = randomizer();
    if (h1.val == h2.val) {
      dealHand();
    } else {
      setSource(h1);
      setSource(h2);
    }
    document.getElementById('randomButton').textContent = "Flop";
    document.getElementById('randomButton').onclick = dealFlop;
  }

  function dealFlop() {
    f1 = randomizer(f1);
    f2 = randomizer(f2);
    f3 = randomizer(f3);
    if (f1==h1||f1==h2||f2==h1||f2==h2||f2==f1||f3==h1||f3==h2||f3==f1||f3==f2) {
      dealFlop();
    } else {
      document.getElementById('flop1').src = cardFileName(f1);
      document.getElementById('flop2').src = cardFileName(f2);
      document.getElementById('flop3').src = cardFileName(f3);
    }
    document.getElementById('randomButton').textContent = "Turn";
    document.getElementById('randomButton').onclick = dealTurn;
  }

  function dealTurn() {
    turn = randomizer(turn);
    if (turn==h1||turn==h2||turn==f1||turn==f2||turn==f3){
      dealTurn();
    } else {
      document.getElementById('turn').src = cardFileName(turn);
    }
    document.getElementById('randomButton').textContent = "River";
    document.getElementById('randomButton').onclick = dealRiver;
  }

  function dealRiver() {
    river = randomizer(river);
    if (river==h1||river==h2||river==f1||river==f2||river==f3||river==turn){
      dealRiver();
    } else {
      document.getElementById('river').src = cardFileName(river);
    }
    document.getElementById('randomButton').textContent = "Redeal";
    document.getElementById('randomButton').onclick = clearContent;
  }

  //delete and recreate image
  function clearContent() {
    document.getElementById('h1').src='';
    document.getElementById('h2').src='';
    document.getElementById('flop1').src='';
    document.getElementById('flop2').src='';
    document.getElementById('flop3').src='';
    document.getElementById('turn').src='';
    document.getElementById('river').src='';
    dealHand();
  }


  </script>
</body>
</html>
